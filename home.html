<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://fb.me/react-15.1.0.js"></script>
    <script src="https://fb.me/react-dom-15.1.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/3.0.4/redux.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-redux/4.0.0/react-redux.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-ace/5.4.0/react-ace.js"></script>
    <script src="https://cdn.jsdelivr.net/lodash/4/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/doc_brython.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="css/console.css">

    <script type="text/javascript" src="src/brython_builtins.js"></script>
    <script type="text/javascript" src="src/version_info.js"></script>
    <script type="text/javascript" src="src/py2js.js"></script>
    <script type="text/javascript" src="src/py_object.js"></script>
    <script type="text/javascript" src="src/py_type.js"></script>
    <script type="text/javascript" src="src/py_utils.js"></script>
    <script type="text/javascript" src="src/py_sort.js"></script>
    <script type="text/javascript" src="src/py_builtin_functions.js"></script>
    <script type="text/javascript" src="src/py_exceptions.js"></script>
    <script type="text/javascript" src="src/py_range_slice.js"></script>
    <script type="text/javascript" src="src/py_bytes.js"></script>
    <script type="text/javascript" src="src/py_set.js"></script>
    <script type="text/javascript" src="src/js_objects.js"></script>
    <script type="text/javascript" src="src/stdlib_paths.js"></script>
    <script type="text/javascript" src="src/py_import.js"></script>

    <script type="text/javascript" src="src/unicode.min.js"></script>
    <script type="text/javascript" src="src/py_string.js"></script>
    <script type="text/javascript" src="src/py_int.js"></script>
    <script type="text/javascript" src="src/py_long_int.js"></script>
    <script type="text/javascript" src="src/py_float.js"></script>
    <script type="text/javascript" src="src/py_complex.js"></script>
    <script type="text/javascript" src="src/py_dict.js"></script>
    <script type="text/javascript" src="src/py_list.js"></script>
    <script type="text/javascript" src="src/py_generator.js"></script>
    <script type="text/javascript" src="src/py_dom.js"></script>

    <script type="text/javascript" src="src/builtin_modules.js"></script>
    <script type="text/javascript" src="src/py_import_hooks.js"></script>

    <script type="text/javascript" src="src/brython_stdlib.js"></script>

 <!--    <script src="ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
    <script src="ace/mode-python3.js" type="text/javascript" charset="utf-8"></script>
    <script src="ace/snippets/python.js" type="text/javascript" charset="utf-8"></script> -->
    


   <!--  <script type="text/python3" id="tests_editor">
        from browser import document as doc, window
        from browser import html
        import editor, editor2

        doc['run2'].bind('click',editor2.run)

    </script> -->
<!-- global output
        doc["console"].value = ''
        src = editor.getValue()
        first = edit.returnValue()
        first += "\n\n\n"
        first +=src
        if storage is not None:
           storage["py_src2"] = src

        t0 = time.perf_counter()
        try:
            ns = {'__name__':'__main__'}
            exec(first, ns)
            state = 1
        except Exception as exc:
            traceback.print_exc(file=sys.stderr)
            state = 0
        output = doc["console"].value

        print('<completed in %6.2f ms>' % ((time.perf_counter() - t0) * 1000.0))
        return state -->

    <script>
        const initialState = {
          values: [],
          runFromIndex: null,
          results: []
        }
        window.define = ace.define
        const userCode = (state = initialState, action) => {
          switch(action.type){
            case('UPDATE_CODE'):    
              return {
                ...state,
                values: [
                  ...state.values.slice(0, action.index),
                  action.value,
                  ...state.values.slice(action.index + 1)
                ]
              }
            case('UPDATE_INDEX'):
              return {
                ...state,
                runFromIndex: action.index
              }
            case('UPDATE_RESULTS'):
              return {
                ...state,
                results: [
                  ...state.results.slice(0, action.index),
                  action.value,
                  ...state.results.slice(action.index + 1)
                ]
              }
            default:
              return state;
          }  
        };
        const { combineReducers } = Redux;
        const editorApp = combineReducers({
          userCode:userCode
        })

        window.store = Redux.createStore(editorApp);
    </script>
    <script>
        function run_js(){
            var cons = document.getElementById("console");
            var jscode = cons.value;
            var t0 = (new Date()).getTime();
            eval(jscode);
            var t1 = (new Date()).getTime();
            console.log("Javascript code run in "+(t1-t0)+" ms")
        }
    </script>
    
    

    <script type="text/python3" id="tests_editor">
      from browser import document as doc, window
      from browser import html
      import  editor

      doc['run-button'].bind('click', editor.run)
    </script>

</head>
<body onload="brython({debug:1})">
    <nav class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">Python Run</a>
            </div> <div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
            </ul>
        </div>
    </nav>

    <button id="run-button" style="display:none"></button>
    <div id="root" />

    <script type="text/babel" src="src/editor.js"></script>
</body>
</html>